var D=Object.defineProperty;var R=(r,n,a)=>n in r?D(r,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[n]=a;var b=(r,n,a)=>R(r,typeof n!="symbol"?n+"":n,a);import"./modulepreload-polyfill.B5Qt9EMX.min.js";import{c as f,R as I,a as w,B as U}from"./CartService.BMkk3yap.min.js";import{j as e,r as u,t as j,c as O}from"./bundle-mjs.DY7OEoBL.min.js";class S extends HTMLElement{constructor(){super(...arguments);b(this,"unsubscribe")}connectedCallback(){this.unsubscribe=f.subscribe("cart:updated",a=>{const t=a.item_count;this.textContent=t.toString(),t>0?this.classList.remove("hidden"):this.classList.add("hidden")})}disconnectedCallback(){this.unsubscribe&&this.unsubscribe()}}b(S,"elementName","cart-counter");customElements.define(S.elementName,S);class C{static formatCurrency(n,a="GBP",t="en-GB"){return new Intl.NumberFormat(t,{style:"currency",currency:a,minimumFractionDigits:2,maximumFractionDigits:2}).format(n/100)}}function A({items:r,onUpdateQuantity:n,onRemoveItem:a}){return e.jsx("div",{className:"flow-root",children:e.jsx("ul",{className:"-my-6 divide-y divide-gray-200",children:r.map(t=>e.jsxs("li",{className:"flex py-6",children:[e.jsx("div",{className:"h-24 w-24 flex-shrink-0 overflow-hidden rounded-md border border-gray-200",children:t.image?e.jsx("img",{src:t.image,alt:t.title,className:"h-full w-full object-cover object-center"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-100",children:e.jsx("span",{className:"text-sm text-gray-400",children:"No image"})})}),e.jsxs("div",{className:"ml-4 flex flex-1 flex-col",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-primary flex justify-between text-base font-medium",children:[e.jsx("h3",{children:e.jsx("a",{href:t.url,children:t.title})}),e.jsx("p",{className:"ml-4",children:C.formatCurrency(t.final_price)})]}),e.jsx("div",{className:"text-primary flex justify-between text-base font-medium",children:t.variant_title&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t.variant_title})})]}),e.jsxs("div",{className:"flex flex-1 items-end justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",className:"cursor-pointer rounded-l-md border border-r-0 border-gray-300 px-2 py-1 text-gray-500 hover:bg-gray-50",onClick:()=>n(t.key,t.quantity-1),disabled:t.quantity<=1,children:"-"}),e.jsx("span",{className:"w-10 border-y border-gray-300 py-1 text-center",children:t.quantity}),e.jsx("button",{type:"button",className:"cursor-pointer rounded-r-md border border-l-0 border-gray-300 px-2 py-1 text-gray-500 hover:bg-gray-50",onClick:()=>n(t.key,t.quantity+1),children:"+"})]}),e.jsx("div",{className:"flex",children:e.jsx("button",{type:"button",className:"text-primary hover:text-primary-light cursor-pointer font-medium",onClick:()=>a(t.key),children:"Remove"})})]})]})]},t.key))})})}const M=()=>{try{const r=document.getElementById("initial-cart-state");if(r!=null&&r.textContent){const n=JSON.parse(r.textContent);if(n&&typeof n=="object"&&Array.isArray(n.items))return n}}catch{}return null};function $(){const[r,n]=u.useState(()=>M()),[a,t]=u.useState(!1),o=u.useRef(r!==null),m=i=>{const h=document.querySelector("[data-cart-price]");h&&(h.textContent=C.formatCurrency(i))},d=i=>{const h=document.querySelector("[data-cart-checkout-button]");h&&(h.disabled=i)};u.useEffect(()=>{if(o.current)f.fetchCart();else{const c=f.getState();c&&c.items.length>0?(n(c),m(c.total_price),d(c.items.length===0),o.current=!0):(t(!0),d(!0),f.fetchCart().then(s=>{s?(n(s),m(s.total_price),d(s.items.length===0)):(n({items:[],item_count:0,total_price:0,original_total_price:0,total_discount:0,currency:"",note:null,attributes:{}}),m(0),d(!0)),t(!1),o.current=!0}))}const i=f.subscribe("cart:updated",c=>{n(c),m(c.total_price),d(c.items.length===0)}),h=f.subscribe("cart:loading",c=>{o.current||t(c.loading)});return()=>{i(),h()}},[]);const x=async(i,h)=>{await f.updateItem(i,h)},g=async i=>{await f.removeItem(i)};return a&&!o.current?e.jsx("div",{className:"p-6 text-center",children:"Loading cart items..."}):!r||r.items.length===0?(m(0),d(!0),e.jsx("div",{className:"p-6 text-center",children:"Your cart is empty."})):e.jsx(A,{items:r.items,onUpdateQuantity:x,onRemoveItem:g})}class E extends I{connectedCallback(){super.connectedCallback(),this.renderReact(e.jsx($,{}))}}b(E,"elementName","cart-item-list");customElements.define(E.elementName,E);function L({className:r}){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",height:"1em",width:"1em",className:r,children:e.jsx("path",{d:"M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z",fill:"currentColor"})})}function q({className:r}){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:e.jsx("path",{d:"m6 9 6 6 6-6"})})}function F(){const[r,n]=u.useState(!1),[a,t]=u.useState(!1),[o,m]=u.useState(!1),[,d]=u.useState(0);u.useEffect(()=>{const l=w.subscribe("cart:open",()=>{n(!0)}),p=w.subscribe("cart:close",()=>{n(!1)}),N=w.subscribe("cart:toggle",()=>{n(w.isCartOpen())}),k=f.subscribe("cart:updated",()=>{d(v=>v+1)}),y=f.subscribe("cart:loading",v=>{m(v.loading)});return()=>{l(),p(),N(),k(),y()}},[]);const x=()=>{w.closeCart()},g=()=>{w.closeCart()},i=async(l,p)=>{await f.updateItem(l,p)},h=async l=>{await f.removeItem(l)},c=()=>{t(!1)},s=f.getState();return e.jsxs(e.Fragment,{children:[e.jsxs("dialog",{open:a,className:"fixed inset-0 z-[60] m-0 h-full w-full bg-transparent p-0",onClick:c,children:[e.jsx("div",{className:"fixed inset-0 bg-white/70","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"m-6 flex min-h-full items-center justify-center",children:e.jsx("div",{className:"relative w-full max-w-2xl overflow-y-auto rounded-lg bg-white p-6 shadow-xl",onClick:l=>l.stopPropagation(),children:e.jsxs("div",{className:"mb-6 flex items-center justify-center",children:[e.jsx("h2",{className:"text-primary text-xl font-medium",children:"12-month guarantee"}),e.jsx("button",{type:"button",className:"text-primary hover:text-primary-light absolute right-4 top-6 cursor-pointer",onClick:c,children:e.jsx(L,{className:"h-6 w-6"})})]})})})})]}),e.jsx("div",{className:j("fixed inset-0 z-50 transition-opacity duration-300",r?"bg-white/70":"pointer-events-none opacity-0"),onClick:g}),e.jsx("div",{className:j("fixed inset-y-0 right-0 z-50 w-full max-w-xl transform overflow-y-auto bg-white shadow-xl transition-transform duration-300 ease-in-out",r?"translate-x-0":"translate-x-full"),children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"border-b border-gray-200 bg-white px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-primary text-lg font-medium",children:"Your Bag"}),e.jsxs("button",{type:"button",className:"cursor-pointer text-gray-400 hover:text-gray-500",onClick:x,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(L,{className:"h-6 w-6"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 sm:px-6",children:o?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"border-t-primary h-8 w-8 animate-spin rounded-full border-2 border-gray-300"})}):!s||s.items.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center",children:[e.jsx("p",{className:"text-primary mb-4 text-center text-lg font-medium",children:"Your bag is empty"}),e.jsx("button",{onClick:x,className:"btn btn-secondary",children:"Continue Shopping"})]}):e.jsx(A,{items:s.items,onUpdateQuantity:i,onRemoveItem:h})}),s&&s.items.length>0&&!o&&e.jsxs("div",{className:"border-t border-gray-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"text-primary flex justify-between text-base font-medium",children:[e.jsx("p",{children:"Subtotal"}),e.jsx("p",{children:C.formatCurrency(s.original_total_price)})]}),s.total_discount>0&&e.jsxs("div",{className:"text-primary flex justify-between text-base font-medium",children:[e.jsx("p",{children:"Discount"}),e.jsxs("p",{children:["-",C.formatCurrency(s.total_discount)]})]}),e.jsxs("div",{className:"text-primary mt-2 flex justify-between text-base font-medium",children:[e.jsx("p",{children:"Total"}),e.jsx("p",{children:C.formatCurrency(s.total_price)})]}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500",children:"Shipping and taxes calculated at checkout."}),e.jsx("div",{className:"mt-6",children:e.jsx("a",{href:"/cart",className:"btn btn-secondary flex w-full items-center justify-center",children:"Go To Bag"})}),e.jsx("div",{className:"mt-6 flex justify-center text-center text-sm text-gray-500",children:e.jsxs("p",{children:["or"," ",e.jsxs("button",{type:"button",className:"text-primary hover:text-primary-light cursor-pointer font-medium",onClick:x,children:["Continue Shopping",e.jsx("span",{"aria-hidden":"true",children:" â†’"})]})]})})]})]})})]})}class B extends I{connectedCallback(){super.connectedCallback(),this.renderReact(e.jsx(F,{}))}}b(B,"elementName","cart-drawer");customElements.define(B.elementName,B);function _({title:r,url:n,children:a,hasChildren:t,isOpen:o,onToggle:m,id:d,index:x=0,parentIsOpen:g=!0}){return e.jsx("div",{className:j("border-b border-gray-100 transition-all duration-200 last:border-b-0",g?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"),style:{transitionDelay:`${x*25}ms`},children:t?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"text-primary flex w-full items-center justify-between rounded-md px-4 py-3 text-base font-medium transition-colors hover:bg-gray-50",onClick:()=>m(d),children:[r,e.jsx(q,{className:j("h-5 w-5 text-gray-500 transition-transform duration-200",o&&"rotate-180")})]}),e.jsx("div",{className:j("overflow-hidden transition-all duration-200 ease-in-out",o?"max-h-screen opacity-100":"max-h-0 opacity-0"),children:e.jsx("div",{className:"my-1 ml-2 border-l border-gray-50 pl-2",children:a==null?void 0:a.map((i,h)=>{var c;return e.jsx("div",{className:j("transition-all duration-200",o?"translate-y-0 opacity-100":"-translate-y-2 opacity-0"),style:{transitionDelay:o?`${h*25}ms`:"0ms"},children:e.jsx(_,{title:i.title,url:i.url,children:i.children,hasChildren:!!((c=i.children)!=null&&c.length),isOpen:i.isOpen,onToggle:m,id:i.id,parentIsOpen:o},i.id)},i.id)})})})]}):e.jsx("a",{href:n,className:"text-primary block rounded-md px-4 py-3 text-base font-medium transition-colors hover:bg-gray-50",children:r})})}function G({isOpen:r,onClose:n,menuLinks:a=[]}){const[t,o]=u.useState(!1),[m,d]=u.useState(!1),x=u.useRef(null),[g,i]=u.useState(new Set);u.useEffect(()=>{r?(d(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!0),setTimeout(()=>{d(!0)},100)})}),document.body.style.overflow="hidden"):(o(!1),d(!1),document.body.style.overflow="")},[r]),u.useEffect(()=>{const s=l=>{r&&l.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[r,n]),u.useEffect(()=>{r&&x.current&&setTimeout(()=>{var s;(s=x.current)==null||s.focus()},100)},[r]);const h=s=>{i(l=>{const p=new Set(l);return p.has(s)?p.delete(s):p.add(s),p})},c=a.reduce((s,l,p)=>{var k;const N={...l,children:[],id:`${l.level}-${p}-${l.url}`,isOpen:g.has(`${l.level}-${p}-${l.url}`)};if(l.level===1)s.push(N);else if(l.level===2){const y=s[s.length-1];y&&y.children&&y.children.push(N)}else if(l.level===3){const y=s[s.length-1];if(((k=y==null?void 0:y.children)==null?void 0:k.length)>0){const v=y.children[y.children.length-1];v&&v.children&&v.children.push(N)}}return s},[]);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:j("bg-primary fixed inset-0 z-50 transition-opacity duration-200 ease-in-out",t?"pointer-events-auto opacity-50":"pointer-events-none opacity-0"),onClick:n,"aria-hidden":"true"}),e.jsx("div",{className:j("fixed inset-y-0 left-0 z-50 w-full max-w-sm transform bg-white shadow-xl transition-all duration-200 ease-out",t?"translate-x-0":"-translate-x-full"),onClick:s=>s.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"drawer-title",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 bg-gray-50 px-6 py-4",children:[e.jsx("h2",{id:"drawer-title",className:"text-primary text-lg font-semibold",children:"Menu"}),e.jsx("button",{ref:x,onClick:n,className:"flex h-10 w-10 items-center justify-center rounded-full text-gray-500 transition-colors hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200","aria-label":"Close menu",children:e.jsx(L,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:e.jsx("nav",{className:"space-y-1",children:c.map((s,l)=>e.jsx(_,{title:s.title,url:s.url,children:s.children,hasChildren:s.children.length>0,isOpen:g.has(s.id),onToggle:h,id:s.id,index:l,parentIsOpen:m},s.id))})})]})})]})}class P extends HTMLElement{constructor(){super(...arguments);b(this,"root",null);b(this,"isOpen",!1);b(this,"handleMenuButtonClick",()=>{this.isOpen=!0,this.render()});b(this,"handleCartButtonClick",()=>{window.cartDrawerService&&window.cartDrawerService.openCart()});b(this,"handleClose",()=>{this.isOpen=!1,this.render()})}connectedCallback(){const a=document.getElementById("mobile-menu-button");a&&a.addEventListener("click",this.handleMenuButtonClick);const t=document.getElementById("cart-button");t&&t.addEventListener("click",this.handleCartButtonClick),this.root=O.createRoot(this),this.render()}disconnectedCallback(){const a=document.getElementById("mobile-menu-button");a&&a.removeEventListener("click",this.handleMenuButtonClick);const t=document.getElementById("cart-button");t&&t.removeEventListener("click",this.handleCartButtonClick),this.root&&(this.root.unmount(),this.root=null)}render(){if(!this.root)return;const a=[];document.querySelectorAll("[data-menu-link]").forEach((t,o)=>{const m=t.getAttribute("href")||"",d=t.textContent||"",x=parseInt(t.getAttribute("data-menu-level")||"1",10);a.push({url:m,title:d,level:x,children:[],id:`${x}-${o}-${m}`,isOpen:!1})}),this.root.render(e.jsx(G,{isOpen:this.isOpen,onClose:this.handleClose,menuLinks:a}))}}typeof window<"u"&&!customElements.get("main-nav-drawer")&&customElements.define("main-nav-drawer",P);class T extends U{constructor(){super(".js-flickity",{cellAlign:"center",contain:!0,pageDots:!1,autoPlay:!0,pauseAutoPlayOnHover:!0,wrapAround:!0,prevNextButtons:!1}),document.querySelector(".js-flickity")&&this.init()}}new T;
