var k=Object.defineProperty;var A=(g,i,e)=>i in g?k(g,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):g[i]=e;var f=(g,i,e)=>A(g,typeof i!="symbol"?i+"":i,e);import{B as M,F as I,R as G,c as E,a as z}from"./CartService.BMkk3yap.min.js";import{j as l,r as p,c as T,t as w}from"./bundle-mjs.DY7OEoBL.min.js";const x=class x extends M{constructor(e){super(e,{prevNextButtons:!1,pageDots:!1,imagesLoaded:!0,cellAlign:"left",contain:!0,groupCells:"100%"});f(this,"modal",null);f(this,"mainGallery",null);f(this,"navGallery",null);f(this,"originalImages",[]);f(this,"currentImages",[]);this.storeOriginalImages(),this.initializeGalleries(),this.initializeModal(),this.initializeVariantListener(),window.addEventListener("beforeunload",()=>this.destroy())}storeOriginalImages(){const e=document.querySelectorAll(".product-gallery-carousel-main img");this.originalImages=Array.from(e).map(t=>({src:t.src,alt:t.alt,width:t.width,height:t.height})),this.currentImages=[...this.originalImages]}initializeVariantListener(){document.addEventListener("variant:changed",e=>{const t=e,{variant:r}=t.detail;r.images&&r.images.length>0&&this.updateGalleryImages(r.images)}),document.addEventListener("gallery:updateImages",e=>{const t=e,{images:r}=t.detail;r&&r.length>0&&this.updateGalleryImages(r)})}updateGalleryImages(e){const t=e.filter(s=>s&&s.trim()!==""&&s!=="null"&&s!=="undefined");if(t.length===0)return;const r=t.map((s,n)=>({src:s,alt:`Product image ${n+1}`,width:800,height:800}));this.currentImages=r,this.refreshGalleryWithImages(r)}resetToOriginalImages(){this.showAllImages(".product-gallery-carousel-main"),this.showAllImages(".product-gallery-carousel-nav"),this.showAllImages(".gallery-modal-carousel"),this.currentImages=[...this.originalImages]}showAllImages(e){const t=document.querySelector(e);if(!t)return;const r=t.querySelectorAll(".carousel-cell"),s=t.querySelectorAll("img");r.forEach((n,u)=>{if(n.style.display="",u<this.originalImages.length){const m=s[u];let o="large";e.includes("nav")?o="small":e.includes("modal")&&(o="2048x");const a=this.getImageUrl(this.originalImages[u].src,o);m.src=a,m.alt=this.originalImages[u].alt}}),e===".product-gallery-carousel-main"&&this.mainGallery&&setTimeout(()=>{var n;(n=this.mainGallery)==null||n.reposition()},100),e===".product-gallery-carousel-nav"&&this.navGallery&&setTimeout(()=>{var n;(n=this.navGallery)==null||n.reposition()},100)}refreshGalleryWithImages(e){if(!e||e.length===0)return;const t=e.filter(r=>r.src&&r.src.trim()!=="");if(t.length!==0)try{this.updateExistingImages(".product-gallery-carousel-main",t,"large"),this.updateExistingImages(".product-gallery-carousel-nav",t,"small"),this.updateExistingImages(".gallery-modal-carousel",t,"2048x")}catch{}}updateExistingImages(e,t,r){const s=document.querySelector(e);if(!s)return;let n=null;if(e===".product-gallery-carousel-main"?n=this.mainGallery:e===".product-gallery-carousel-nav"&&(n=this.navGallery),!n)return;s.classList.add("gallery-loading"),s.classList.remove("gallery-loaded");const u=n.selectedIndex;s.querySelectorAll(".carousel-cell").forEach(o=>{n==null||n.remove(o)}),t.forEach((o,a)=>{const c=document.createElement("div");e===".product-gallery-carousel-nav"?c.className="carousel-cell overflow-hidden rounded-lg":c.className="carousel-cell group relative w-full overflow-hidden md:rounded-lg";const d=document.createElement("img"),h=this.getImageUrl(o.src,r);d.src=h,d.alt=o.alt||`Product image ${a+1}`,d.className="h-full w-full object-cover",d.loading="lazy",r==="small"?(d.width=200,d.height=200):r==="large"?(d.width=800,d.height=800):(d.width=2048,d.height=2048),c.appendChild(d),n==null||n.append(c)}),setTimeout(()=>{if(t.length>0){const o=u<t.length?u:0;n==null||n.select(o,!1,!0)}n==null||n.resize(),s.classList.remove("gallery-loading"),s.classList.add("gallery-loaded")},100)}addGalleryButtons(e){const t=document.createElement("button");t.className="gallery-zoom-button absolute bottom-16 right-4 flex cursor-pointer items-center justify-center rounded-full bg-white/50 p-2 transition-colors duration-200 hover:bg-white/70",t.setAttribute("aria-label","Enlarge image"),t.innerHTML=`<svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
    </svg>`;const r=document.createElement("button");r.className="absolute bottom-4 right-4 flex cursor-pointer items-center justify-center rounded-full bg-white/50 p-2 transition-colors duration-200 hover:bg-white/70",r.setAttribute("aria-label","Add to favorites"),r.innerHTML=`<svg class="w-5 h-5 text-red-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
    </svg>`,e.appendChild(t),e.appendChild(r),t.addEventListener("click",()=>{var s;(s=this.modal)==null||s.showModal(),this.init(),this.mainGallery&&this.select(this.mainGallery.selectedIndex)})}getImageUrl(e,t){return e.includes("shopify")?`${e.split("?")[0]}?width=${this.getSizePixels(t)}`:e}getSizePixels(e){return{small:200,medium:400,large:800,"2048x":2048}[e]||800}initializeGalleries(){const e=document.querySelector(".product-gallery-carousel-nav"),t=document.querySelector(".product-gallery-carousel-main");!e||!t||(e.classList.add("gallery-loading"),t.classList.add("gallery-loading"),this.navGallery=new I(e,{asNavFor:".product-gallery-carousel-main",pageDots:!1,groupCells:"100%",cellAlign:"left",prevNextButtons:!1,imagesLoaded:!0,on:{ready:()=>{e.classList.remove("gallery-loading"),e.classList.add("gallery-loaded")}}}),this.mainGallery=new I(t,{prevNextButtons:!0,pageDots:!0,cellAlign:"left",imagesLoaded:!0,on:{ready:()=>{t.classList.remove("gallery-loading"),t.classList.add("gallery-loaded")}}}))}initializeModal(){if(this.modal=document.querySelector(".gallery-modal"),!this.modal)return;document.addEventListener("click",t=>{var r;t.target.closest(".gallery-zoom-button")&&((r=this.modal)==null||r.showModal(),this.init(),this.mainGallery&&this.select(this.mainGallery.selectedIndex))});const e=this.modal.querySelector(".gallery-modal-close");e==null||e.addEventListener("click",()=>{var t;(t=this.modal)==null||t.close(),this.destroy()}),this.modal.addEventListener("close",()=>{this.destroy()})}updateImages(e){this.updateGalleryImages(e)}getCurrentImages(){return this.currentImages}static initialize(e){return x.instance||(x.instance=new x(e)),x.instance}destroy(){this.mainGallery&&(this.mainGallery.destroy(),this.mainGallery=null),this.navGallery&&(this.navGallery.destroy(),this.navGallery=null),super.destroy()}};f(x,"instance");let L=x;function C({variantId:g,available:i}){const[e,t]=p.useState(""),[r,s]=p.useState(!1),[n,u]=p.useState(E.isLoading());p.useEffect(()=>{const o=E.subscribe("cart:loading",c=>{u(c.loading)}),a=E.subscribe("cart:error",c=>{t(c.message)});return()=>{o(),a()}},[]);const m=async o=>{if(o.preventDefault(),!i){t("This product is currently unavailable");return}s(!0),t("");const a=await E.addItems([{id:g,quantity:1}]);!a.success&&a.error?t(a.error):z.openCart(),s(!1)};return l.jsxs("div",{children:[l.jsx("form",{onSubmit:m,className:"space-y-4",children:l.jsx("button",{type:"submit",disabled:r||n||!i,className:`btn w-full rounded-xl ${i?"btn-primary":"btn-primary cursor-not-allowed"}`,children:r||n?"Adding...":i?"Add to Bag":"Sold Out"})}),e&&l.jsx("div",{className:"mt-2 text-sm text-red-600",children:e})]})}class S extends G{constructor(){super();f(this,"_handleVariantChange");this._handleVariantChange=e=>{const t=e,{variantId:r,variant:s}=t.detail;this.setAttribute("data-variant-id",r.toString()),this.setAttribute("data-available",s.available.toString()),this.renderReact(l.jsx(C,{variantId:r,available:s.available}))}}connectedCallback(){super.connectedCallback();const e=Number.parseInt(this.getAttribute("data-variant-id")||"0",10),t=this.getAttribute("data-available")==="true";document.addEventListener("variant:changed",this._handleVariantChange),this.renderReact(l.jsx(C,{variantId:e,available:t}))}disconnectedCallback(){document.removeEventListener("variant:changed",this._handleVariantChange),super.disconnectedCallback()}}f(S,"elementName","add-to-cart");customElements.define(S.elementName,S);function O({endDate:g}){const[i,e]=p.useState(()=>{const r=new Date(g).getTime(),s=new Date().getTime(),n=r-s;return n<0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(n/864e5),hours:Math.floor(n%864e5/36e5),minutes:Math.floor(n%36e5/6e4),seconds:Math.floor(n%6e4/1e3)}});p.useEffect(()=>{const r=()=>{const u=new Date(g).getTime(),m=new Date().getTime(),o=u-m;return o<0?null:{days:Math.floor(o/864e5),hours:Math.floor(o%864e5/36e5),minutes:Math.floor(o%36e5/6e4),seconds:Math.floor(o%6e4/1e3)}},s=r();s&&e(s);const n=setInterval(()=>{const u=r();if(!u){clearInterval(n);return}e(u)},1e3);return()=>clearInterval(n)},[g]);const t=r=>r.toString().padStart(2,"0");return l.jsxs("div",{children:[l.jsx("div",{className:"mb-3 text-center font-medium",children:"Limited time offer:"}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-2xl font-bold",children:t(i.days)}),l.jsx("span",{className:"text-xs text-gray-500",children:"Days"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-2xl font-bold",children:t(i.hours)}),l.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-2xl font-bold",children:t(i.minutes)}),l.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-2xl font-bold",children:t(i.seconds)}),l.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]})}class B extends HTMLElement{constructor(){super(...arguments);f(this,"root",null)}disconnectedCallback(){this.root&&this.root.unmount()}connectedCallback(){const e=this.getAttribute("end-date");if(!e)return;const t=document.createElement("div");this.appendChild(t),this.root=T.createRoot(t),this.root.render(l.jsx(O,{endDate:e}))}}customElements.define("countdown-timer",B);function D({label:g,selectedValue:i,options:e,onSelect:t,className:r}){const[s,n]=p.useState(!1),u=p.useRef(null);return p.useEffect(()=>{const m=o=>{u.current&&!u.current.contains(o.target)&&n(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),l.jsxs("div",{className:w("relative flex items-center gap-2",r),ref:u,children:[l.jsx("label",{className:"font-heading-serif block",children:g}),l.jsxs("button",{type:"button",onClick:()=>n(!s),className:"focus:border-primary focus:ring-primary flex w-fit items-center justify-between rounded-lg border border-gray-300 bg-white px-4 py-2 text-left shadow-sm hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-opacity-20",children:[l.jsx("span",{className:"font-heading-serif text-sm",children:i}),l.jsx("svg",{className:w("h-5 w-5 text-gray-400 transition-transform",s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&l.jsx("div",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border border-gray-200 bg-white shadow-lg",children:l.jsx("div",{className:"py-1",children:e.map(m=>l.jsx("button",{type:"button",onClick:()=>{t(m),n(!1)},className:w("w-full px-4 py-2 text-left text-sm hover:bg-gray-50 focus:bg-gray-50 focus:outline-none",m===i?"bg-primary text-primary bg-opacity-10 font-medium":"text-gray-900"),children:m},m))})})]})}function q({label:g,selectedValue:i,options:e,onSelect:t,className:r,colorConfig:s}){var o;const n=a=>{if(s&&s[a]){const h=s[a];if(h.hex)return`bg-[${h.hex}]`;if(h.image)return"bg-cover bg-center"}const c={black:"bg-black",white:"bg-white border-gray-300",red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",purple:"bg-purple-500",pink:"bg-pink-500",gray:"bg-gray-500",grey:"bg-gray-500",brown:"bg-amber-700",orange:"bg-orange-500",navy:"bg-navy-900",beige:"bg-amber-100",tan:"bg-yellow-600",silver:"bg-gray-300",gold:"bg-yellow-400"},d=a.toLowerCase();return c[d]||"bg-gray-400"},u=a=>{if(s&&s[a]){const c=s[a];if(c.image)return{backgroundImage:`url(${c.image})`,backgroundSize:"cover",backgroundPosition:"center"};if(c.hex)return{backgroundColor:c.hex}}return{}},m=a=>!!(s&&s[a]&&(s[a].hex||s[a].image));return l.jsxs("div",{className:w("",r),children:[l.jsxs("label",{className:"font-heading-serif mb-2 block",children:[g,":"," ",l.jsx("span",{className:"font-heading-serif",children:((o=s==null?void 0:s[i])==null?void 0:o.name)||i})]}),l.jsx("div",{className:"flex flex-wrap gap-3",children:e.map(a=>{var b,v;const c=i===a,d=n(a),h=u(a),y=m(a);return l.jsxs("button",{type:"button",onClick:()=>t(a),style:y?h:void 0,className:w("relative h-10 w-10 rounded-full border-2 transition-all hover:scale-105",y?"bg-cover bg-center":d,c?"border-gray-900 ring-2 ring-gray-900 ring-offset-2":"border-gray-200 hover:border-gray-300"),title:((b=s==null?void 0:s[a])==null?void 0:b.name)||a,children:[l.jsx("span",{className:"sr-only",children:((v=s==null?void 0:s[a])==null?void 0:v.name)||a}),c&&y&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("svg",{className:"h-4 w-4 text-white drop-shadow-md",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},a)})})]})}function R({variants:g,options:i,initialVariantId:e,onVariantChange:t,onImageChange:r}){const[s,n]=p.useState({});p.useEffect(()=>{const a=g.find(c=>c.id===e);if(a&&i.length>0){const c={};i.forEach((d,h)=>{a.options[h]&&(c[d.name]=a.options[h])}),n(c),r&&a.images&&r(a.images)}},[e,g,i,r]);const u=(a,c)=>{const d={...s,[a]:c};n(d);const h=m(d);h&&(t(h.id,h),r&&h.images&&r(h.images))},m=a=>g.find(c=>i.every((d,h)=>{const y=a[d.name];return c.options[h]===y})),o=a=>a.toLowerCase().includes("color")||a.toLowerCase().includes("colour");return i.length<=0||g.length<=0?null:l.jsx("div",{className:"variant-selectors space-y-6",children:i.map(a=>{const c=s[a.name]||a.values[0];return o(a.name)?l.jsx(q,{label:a.name,selectedValue:c,options:a.values,onSelect:d=>u(a.name,d),colorConfig:a.color_config,className:"w-full"},a.name):l.jsx(D,{label:a.name,selectedValue:c,options:a.values,onSelect:d=>u(a.name,d),className:"w-full"},a.name)})})}class N extends G{connectedCallback(){super.connectedCallback();try{const i=parseInt(this.getAttribute("data-initial-variant-id")||"0",10),e=this.getAttribute("data-variants")||"[]",t=this.getAttribute("data-options")||"[]",r=JSON.parse(e),s=JSON.parse(t),n=(m,o)=>{var h;const a=new URL(window.location.href);a.searchParams.set("variant",m.toString()),window.history.replaceState({},"",a.toString());const c=(h=document.querySelector("[data-product-price]"))==null?void 0:h.parentElement;if(c){const y=parseFloat(o.price)/100,b=o.compare_at_price?parseFloat(o.compare_at_price)/100:null,v=j=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:j%1===0?0:2,maximumFractionDigits:2}).format(j);if(b&&b>y){const j=Math.round((b-y)/b*100);c.innerHTML=`
              <div class="flex items-center">
                <span class="text-3xl text-gray-500 font-bold line-through mr-2" data-product-price>
                  ${v(b)}
                </span>
                <span class="text-3xl font-bold" data-product-price-sale>
                  ${v(y)}
                </span>
                <span class="absolute -top-2 -right-2 ml-2 bg-red-600 border border-red-800 text-xs text-white px-2 py-1 rounded-md uppercase">
                  Save ${j}%
                </span>
              </div>
            `}else c.innerHTML=`
              <span class="text-3xl font-bold" data-product-price>
                ${v(y)}
              </span>
            `}const d=new CustomEvent("variant:changed",{detail:{variantId:m,variant:o},bubbles:!0});this.dispatchEvent(d)},u=m=>{const o=new CustomEvent("gallery:updateImages",{detail:{images:m},bubbles:!0});document.dispatchEvent(o)};this.renderReact(l.jsx(R,{variants:r,options:s,initialVariantId:i,onVariantChange:n,onImageChange:u}))}catch{}}}f(N,"elementName","variant-selector");customElements.define(N.elementName,N);function U(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{L.initialize(".gallery-modal-carousel")}):L.initialize(".gallery-modal-carousel")}U();
